# H2 Database Configuration for Tests
spring.datasource.url=jdbc:h2:mem:testdb;DB_CLOSE_DELAY=-1;DB_CLOSE_ON_EXIT=FALSE
spring.datasource.driverClassName=org.h2.Driver
spring.datasource.username=sa
spring.datasource.password=
spring.jpa.database-platform=org.hibernate.dialect.H2Dialect

# Automatically create and drop schema for each test run
spring.jpa.hibernate.ddl-auto=create-drop

# Show SQL for debugging (optional)
# spring.jpa.show-sql=true

# Deactivate Flyway for tests if schema is managed by hibernate ddl-auto
# Or, ensure Flyway runs first if using it for base schema and then Hibernate validates/updates
spring.flyway.enabled=false

# Make JWT secret and expiration configurable for tests if needed, or rely on main config
# For simplicity, tests might use the main application.properties values for these if not overridden.
# jwt.secret=TestSecretKeyForJwtUtilIntegrationTestsPleaseMakeItLongEnoughAndSecure
# jwt.expiration.ms=3600000

# Disable caching for integration tests to ensure fresh data from DB
spring.cache.type=none

# Mail sender (deactivate for most tests unless specifically testing mail)
spring.mail.host=localhost
spring.mail.port=2526 # A mock port, or ensure it's not trying to send
# spring.mail.test-connection=false # Spring Boot 2.3+
# For Spring Boot 3.x, mail auto-configuration might try to connect.
# If using a library like GreenMail, configure it here. Otherwise, ensure mail sending calls are mocked or handled in tests.
# For these integration tests, we are not testing mail sending itself, so EmailService being @Autowired(required=false) is helpful.

# Ensure storage paths are sensible for tests, e.g., use system temp directory
# These might not be used if file operations are mocked in service layer tests
# For integration tests, if file system interaction is part of the test, these need to be writable.
hrms.payslip.storage.base-path=build/test-payslips/
hrms.company-document.storage.base-path=build/test-company-documents/
hrms.investment-proof.storage.base-path=build/test-investment-proofs/

# Default System Configs (can be overridden by what's in V15 if Flyway was enabled)
MINIMUM_WORK_HOURS_PER_DAY=8.0
LATE_LOGIN_THRESHOLD_TIME=09:30:00
ALLOW_EMPLOYEE_SELF_REGISTRATION=false
DEFAULT_TASK_PRIORITY=0
MAX_CONCURRENT_SESSIONS_PER_USER=2
PASSWORD_EXPIRY_DAYS=90
SYSTEM_WIDE_ANNOUNCEMENT=Welcome to HRMS Test Environment!
